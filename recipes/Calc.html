<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balanced Undecimal Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin-top: 50px;
        }
        .calculator {
            display: inline-block;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
        }
        input {
            width: 200px;
        }
    </style>
</head>
<body>
    <div class="calculator">
        <h2>Balanced Undecimal Calculator</h2>
        <input type="text" id="inputField" placeholder="Enter calculation">
        <br>
        <button onclick="calculate()">=</button>
        <input type="text" id="outputField" readonly>
        <br>
        <button onclick="appendToInput('d')">d</button>
        <button onclick="appendToInput('q')">q</button>
        <button onclick="appendToInput('p')">p</button>
        <button onclick="appendToInput('b')">b</button>
        <br>
        <button onclick="appendToInput('L')">L</button>
        <button onclick="appendToInput('w')">w</button>
        <button onclick="appendToInput('m')">m</button>
        <button onclick="appendToInput('7')">7</button>
        <br>
        <button onclick="appendToInput('6')">6</button>
        <button onclick="appendToInput('o')">o</button>
        <button onclick="clearInput()">C</button>
        <button onclick="appendToInput('9')">9</button>
        <br>
        <button onclick="appendToInput('×')">×</button>
        <button onclick="appendToInput('+')">+</button>
        <button onclick="appendToInput('/')">/</button>
    </div>

    <script>
        // Define the symbols and their corresponding values
        const undecimalSymbols = ['6', 'L', 'w', 'd', 'q', 'o', 'p', 'b', 'm', '7', '9'];
        const undecimalValues = {
            '6': -5, 'L': -4, 'w': -3, 'd': -2, 'q': -1,
            'o': 0,
            'p': 1, 'b': 2, 'm': 3, '7': 4, '9': 5
        };

        // Convert from balanced undecimal to unbalanced base 11
        function balancedToUnbalanced(undecimalStr) {
            let unbalancedStr = '';
            for (let char of undecimalStr) {
                let value = undecimalValues[char];
                if (value < 0) {
                    value += 11;
                }
                unbalancedStr += value.toString();
            }
            return unbalancedStr;
        }

        // Convert from unbalanced base 11 to decimal
        function unbalancedToDecimal(unbalancedStr) {
            let decimalValue = 0;
            for (let i = 0; i < unbalancedStr.length; i++) {
                decimalValue = decimalValue * 11 + parseInt(unbalancedStr[i]);
            }
            return decimalValue;
        }

        // Convert from decimal to unbalanced base 11
        function decimalToUnbalanced(decimalValue) {
            let unbalancedStr = '';
            while (decimalValue !== 0) {
                let remainder = decimalValue % 11;
                decimalValue = Math.floor(decimalValue / 11);
                unbalancedStr = remainder.toString() + unbalancedStr;
            }
            return unbalancedStr || '0';
        }

        // Convert from unbalanced base 11 to balanced undecimal
        function unbalancedToBalanced(unbalancedStr) {
            let undecimalStr = '';
            for (let char of unbalancedStr) {
                let value = parseInt(char);
                if (value > 5) {
                    value -= 11;
                }
                undecimalStr += undecimalSymbols[value + 5];
            }
            return undecimalStr;
        }

        // Perform the calculation based on the input
        function calculate() {
            const inputField = document.getElementById('inputField');
            const inputStr = inputField.value;

            let operands, operation;
            if (inputStr.includes('+')) {
                operands = inputStr.split('+');
                operation = '+';
            } else if (inputStr.includes('×')) {
                operands = inputStr.split('×');
                operation = '×';
            } else if (inputStr.includes('/')) {
                operands = inputStr.split('/');
                operation = '/';
            } else {
                return;
            }

            const operand1Unbalanced = balancedToUnbalanced(operands[0]);
            const operand2Unbalanced = balancedToUnbalanced(operands[1]);

            const operand1Decimal = unbalancedToDecimal(operand1Unbalanced);
            const operand2Decimal = unbalancedToDecimal(operand2Unbalanced);

            let resultDecimal;
            switch (operation) {
                case '+':
                    resultDecimal = operand1Decimal + operand2Decimal;
                    break;
                case '×':
                    resultDecimal = operand1Decimal * operand2Decimal;
                    break;
                case '/':
                    resultDecimal = operand1Decimal / operand2Decimal;
                    break;
            }

            const resultUnbalanced = decimalToUnbalanced(resultDecimal);
            const resultUndecimal = unbalancedToBalanced(resultUnbalanced);

            document.getElementById('outputField').value = resultUndecimal;
        }

        // Append a symbol to the input field
        function appendToInput(symbol) {
            const inputField = document.getElementById('inputField');
            inputField.value += symbol;
        }

        // Clear the input and output fields
        function clearInput() {
            const inputField = document.getElementById('inputField');
            inputField.value = '';
            document.getElementById('outputField').value = '';
        }
    </script>
</body>
</html>
