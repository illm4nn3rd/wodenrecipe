<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Balanced Undecimal Scientific Calculator</title>
    <link href="https://fonts.googleapis.com/css2?family=Kurale&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/big.js/6.1.1/big.min.js"></script>

    <style>
        /* ... [same styles as before] ... */
        body, button, input, footer {
            font-family: 'Kurale', serif;
            background-color: #fff;
            color: #000;
            text-align: center;
            margin: 0;
            padding: 0;
            border: none;
            box-sizing: border-box;
        }

        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .calculator {
            padding: 20px;
            border: 1px solid #000;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
            border: 2px solid #000;
        }

        /* ... [same button styles as before] ... */

        input {
            width: 200px;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #000;
            background-color: #fff;
            color: #000;
        }

        footer {
            margin-top: 20px;
            font-size: 0.8em;
        }
    </style>
</head>

<body>
    <div class="calculator">
        <h2>Balanced Undecimal Scientific Calculator</h2>
        <input type="text" id="inputField" placeholder="Enter calculation">
        //<br>
        <br>
        <button data-undecimal="6" onclick="appendToInput('6')">6</button>
        <button data-undecimal="L" onclick="appendToInput('L')">L</button>
        <button data-undecimal="7" onclick="appendToInput('7')">7</button>
        <button data-undecimal="9" onclick="appendToInput('9')">9</button>
        <br>
        <button data-undecimal="d" onclick="appendToInput('d')">d</button>
        <button data-undecimal="q" onclick="appendToInput('q')">q</button>
        <button data-undecimal="p" onclick="appendToInput('p')">p</button>
        <button data-undecimal="b" onclick="appendToInput('b')">b</button>
        <br>
        <button data-undecimal="w" onclick="appendToInput('w')">w</button>
        <button data-undecimal="o" onclick="appendToInput('o')">o</button>
        <button onclick="clearInput()">C</button>
        <button data-undecimal="m" onclick="appendToInput('m')">m</button>
        <br>
        <button onclick="appendToInput('×')">×</button>
        <button onclick="appendToInput('+')">+</button>
        <button onclick="appendToInput('/')">/</button>
        <button onclick="calculate()">=</button>
        <br>
        //<!-- ... [same buttons as before] ... -->
        <button onclick="appendToInput('cos(')">cos</button>
        <button onclick="appendToInput('sin(')">sin</button>
        <button onclick="appendToInput('tan(')">tan</button>
        <button onclick="appendToInput('log(')">log</button>
        <br>
        <button onclick="appendToInput('^')">^</button>
        <button onclick="appendToInput('sqrt(')">√</button>
        <button onclick="appendToInput('pi')">π</button>
        <button onclick="appendToInput('e')">e</button>
        <br>
        <input type="text" id="outputField" readonly>
        <br>
        <footer>
            Version: o.pm
        </footer>
    </div>

    <script>
        const undecimalSymbols = ['6', 'L', 'w', 'd', 'q', 'o', 'p', 'b', 'm', '7', '9'];
        const undecimalValues = {
            '6': -5, 'L': -4, 'w': -3, 'd': -2, 'q': -1,
            'o': 0,
            'p': 1, 'b': 2, 'm': 3, '7': 4, '9': 5
        };

        function balancedToDecimal(undecimalStr) {
            let decimalValue = new Big(0);
            let base = new Big(1);
            for (let i = undecimalStr.length - 1; i >= 0; i--) {
                decimalValue = decimalValue.plus(base.times(undecimalValues[undecimalStr[i]]));
                base = base.times(11);
            }
            return decimalValue;
        }

        function decimalToBalanced(decimalValue) {
            if (decimalValue.eq(0)) return 'o';
            let undecimalStr = '';
            while (!decimalValue.eq(0)) {
                let remainder = decimalValue.mod(11);
                decimalValue = decimalValue.div(11).floor();
                if (remainder.gt(5)) {
                    remainder = remainder.minus(11);
                    decimalValue = decimalValue.plus(1);
                } else if (remainder.lt(-5)) {
                    remainder = remainder.plus(11);
                    decimalValue = decimalValue.minus(1);
                }
                undecimalStr = undecimalSymbols[remainder.plus(5).toNumber()] + undecimalStr;
            }
            return undecimalStr;
        }

        function calculate() {
            const inputField = document.getElementById('inputField');
            let inputStr = inputField.value;

            // Handle scientific functions
            inputStr = inputStr.replace(/cos\(([^)]+)\)/g, (_, match) => Math.cos(balancedToDecimal(match).toNumber()));
            inputStr = inputStr.replace(/sin\(([^)]+)\)/g, (_, match) => Math.sin(balancedToDecimal(match).toNumber()));
            inputStr = inputStr.replace(/tan\(([^)]+)\)/g, (_, match) => Math.tan(balancedToDecimal(match).toNumber()));
            inputStr = inputStr.replace(/log\(([^)]+)\)/g, (_, match) => Math.log(balancedToDecimal(match).toNumber()));
            inputStr = inputStr.replace(/sqrt\(([^)]+)\)/g, (_, match) => Math.sqrt(balancedToDecimal(match).toNumber()));
            inputStr = inputStr.replace(/pi/g, Math.PI);
            inputStr = inputStr.replace(/e/g, Math.E);

            // ... [same logic as before for basic operations] ...
// Perform the arithmetic operations and display the result
        function calculate() {
            const inputField = document.getElementById('inputField');
            const inputStr = inputField.value;

            let operands, operation;
            if (inputStr.includes('+')) {
                operands = inputStr.split('+');
                operation = '+';
            } else if (inputStr.includes('×')) {
                operands = inputStr.split('×');
                operation = '×';
            } else if (inputStr.includes('/')) {
                operands = inputStr.split('/');
                operation = '/';
            } else {
                return;
            }

            const operand1Decimal = balancedToDecimal(operands[0]);
            const operand2Decimal = balancedToDecimal(operands[1]);

            let resultDecimal;
            switch (operation) {
                case '+':
                    resultDecimal = operand1Decimal + operand2Decimal;
                    break;
                case '×':
                    resultDecimal = operand1Decimal * operand2Decimal;
                    break;
                case '/':
                    resultDecimal = operand1Decimal / operand2Decimal;
                    break;
            }

            const resultUndecimal = decimalToBalanced(resultDecimal);

            document.getElementById('outputField').value = resultUndecimal;
                    }
            const resultUndecimal = decimalToBalanced(resultDecimal);

            document.getElementById('outputField').value = resultUndecimal;
        }

        function appendToInput(symbol) {
            const inputField = document.getElementById('inputField');
            inputField.value += symbol;
        }

        function clearInput() {
            const inputField = document.getElementById('inputField');
            inputField.value = '';
            document.getElementById('outputField').value = '';
        }
    </script>
</body>
</html>
